<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>icub-test: IMU orientation test</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">icub-test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">IMU orientation test </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Prerequisites</h1>
<p>If you want to test multiple IMUs at once, the robot must expose in its <code>yarprobotinterface</code> configuration file a <code>multipleanalogsensorsserver</code> that publishes the orientation measurements for all of available sensors, with a <code>prefix</code> that matches exactly the <code>port</code> parameter of the test (the default one is <code>${portprefix}/alljoints/inertials</code>).</p>
<p>An example of <code>alljoints-inertials_wrapper.xml</code> for iCubV2_* models:</p>
<div class="fragment"><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div>
<div class="line">&lt;!DOCTYPE devices PUBLIC &quot;-//YARP//DTD yarprobotinterface 3.0//EN&quot; &quot;http://www.yarp.it/DTD/yarprobotinterfaceV3.0.dtd&quot;&gt;</div>
<div class="line"> </div>
<div class="line">&lt;device xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot; name=&quot;alljoints-inertials_wrapper&quot; type=&quot;multipleanalogsensorsserver&quot;&gt;</div>
<div class="line">    &lt;param name=&quot;period&quot;&gt;      10                           &lt;/param&gt;</div>
<div class="line">    &lt;param name=&quot;name&quot;&gt; ${portprefix}/alljoints/inertials   &lt;/param&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;action phase=&quot;startup&quot; level=&quot;10&quot; type=&quot;attach&quot;&gt;</div>
<div class="line">        &lt;paramlist name=&quot;networks&quot;&gt;</div>
<div class="line">            &lt;elem name=&quot;FirstStrain&quot;&gt; alljoints-inertials_remapper &lt;/elem&gt;</div>
<div class="line">        &lt;/paramlist&gt;</div>
<div class="line">       &lt;/action&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;action phase=&quot;shutdown&quot; level=&quot;15&quot; type=&quot;detach&quot; /&gt;</div>
<div class="line">&lt;/device&gt;</div>
</div><!-- fragment --><p>and <code>alljoints-inertials_remapper.xml</code>:</p>
<div class="fragment"><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</div>
<div class="line">&lt;!DOCTYPE devices PUBLIC &quot;-//YARP//DTD yarprobotinterface 3.0//EN&quot; &quot;http://www.yarp.it/DTD/yarprobotinterfaceV3.0.dtd&quot;&gt;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    &lt;device xmlns:xi=&quot;http://www.w3.org/2001/XInclude&quot; name=&quot;alljoints-inertials_remapper&quot; type=&quot;multipleanalogsensorsremapper&quot;&gt;</div>
<div class="line">        &lt;param name=&quot;OrientationSensorsNames&quot;&gt;</div>
<div class="line">            (l_arm_ft r_arm_ft head_imu_0)</div>
<div class="line">        &lt;/param&gt;</div>
<div class="line">        &lt;action phase=&quot;startup&quot; level=&quot;5&quot; type=&quot;attach&quot;&gt;</div>
<div class="line">            &lt;paramlist name=&quot;networks&quot;&gt;</div>
<div class="line">                &lt;elem name=&quot;head_imu&quot;&gt;  head_inertial_hardware_device &lt;/elem&gt;</div>
<div class="line">                &lt;elem name=&quot;left_arm_imu&quot;&gt;  left_arm_inertial_hardware_device &lt;/elem&gt;</div>
<div class="line">                &lt;elem name=&quot;right_arm_imu&quot;&gt;  right_arm_inertial_hardware_device &lt;/elem&gt;</div>
<div class="line">            &lt;/paramlist&gt;</div>
<div class="line">        &lt;/action&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;action phase=&quot;shutdown&quot; level=&quot;20&quot; type=&quot;detach&quot; /&gt;</div>
<div class="line">    &lt;/device&gt;</div>
</div><!-- fragment --><h1>Usage</h1>
<p>There are essentially two methods to install and run the IMU orientation test, which are going to be described in the following sections. In both cases, after launching the test, a .mat file containing the relevant measurements involved in the test will be generated.</p>
<h2>robotology-superbuild</h2>
<p>If you have installed <code>icub-tests</code> as a part of the <code>robotology superbuild</code> framework with the <a href="https://github.com/robotology/robotology-superbuild/blob/master/doc/cmake-options.md#robot-testing">Robot Testing profile</a> activation, i.e. by enabling the <code>ROBOTOLOGY_ENABLE_ROBOT_TESTING</code> CMake option of the superbuild, this test, like the others, is already available.</p>
<p>In this case, after compiling and being sure that <code>yarpserver</code> is up, you can run:</p>
<div class="fragment"><div class="line">cd robotology-superbuild/src/icub-tests</div>
<div class="line">robottestingframework-testrunner --suite suites/imu.xml</div>
</div><!-- fragment --><p>Otherwise, if you want to launch the test in a simulation environment, in a shell open a <code>gazebo</code> environment and import, for example, your iCub model. After that, open a separated shell, and:</p>
<div class="fragment"><div class="line">#set YARP_ROBOT_NAME env variable with the name of the model you imported in gazebo</div>
<div class="line">#example:</div>
<div class="line">export YARP_ROBOT_NAME=iCubGazeboV2_7</div>
<div class="line">cd robotology-superbuild/src/icub-tests</div>
<div class="line">robottestingframework-testrunner --suite suites/imu-icubGazeboSim.xml</div>
</div><!-- fragment --><h2>pixi</h2>
<p>If you want to run the test without depending on the whole robotology-superbuild, you can use <code>pixi</code>. First of all, be sure to have <a href="https://pixi.sh/#installation"><code>pixi</code></a> installed. Then, clone <code>icub-tests</code> and run the test as a pixi task:</p>
<div class="fragment"><div class="line">git clone https://github.com/robotology/icub-tests</div>
<div class="line">cd icub-tests</div>
<div class="line">pixi run imu_test</div>
</div><!-- fragment --><p>In simulation, instead, import your model in <code>gazebo</code> and then run:</p>
<div class="fragment"><div class="line">#set YARP_ROBOT_NAME env variable with the name of the model you imported in gazebo</div>
<div class="line">#example:</div>
<div class="line">export YARP_ROBOT_NAME=iCubGazeboV2_7</div>
<div class="line">cd icub-tests</div>
<div class="line">pixi run imu_sim_test</div>
</div><!-- fragment --><h1>Generate report</h1>
<p>The IMU test is based on <a href="https://github.com/robotology/robometry"><code>robometry</code></a> that allows logging data from the robot sensors and saving them into a .mat file that will be generated at the end of the test execution.</p>
<p>To generate the report containing the plots with the acquired data and the results of the test, you can launch the <code>generate_report.mlx</code> MATLAB Live Script under <code>icub-tests/src/imu/report/</code> folder. After opening this file with MATLAB, there is a <code>File Browser control</code> with a <code>File</code> button, from which you can navigate your folders and select the .mat file.</p>
<p>Then, <code>run</code> the script and wait until it's done, it may take some time to finish. Finally, you can manually export the report in HTML format or, in the Command Window, run:</p>
<div class="fragment"><div class="line">export(&#39;report.mlx&#39;, format=&#39;html&#39;, HideCode=true);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
