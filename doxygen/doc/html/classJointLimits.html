<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>icub-test: JointLimits Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">icub-test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">JointLimits Class Reference<div class="ingroups"><a class="el" href="group__icub-tests.html">A list of available tests</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Check if the software joint limits are properly set.  
 <a href="classJointLimits.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="jointLimits_8h_source.html">jointLimits.h</a>&gt;</code></p>

<p>Inherits yarp::robottestingframework::TestCase.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab2cba8458562fa010452d40812d2088"><td class="memItemLeft" align="right" valign="top"><a id="aab2cba8458562fa010452d40812d2088"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>setup</b> (yarp::os::Property &amp;property)</td></tr>
<tr class="separator:aab2cba8458562fa010452d40812d2088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af90bca494fc174654dbd23050438f677"><td class="memItemLeft" align="right" valign="top"><a id="af90bca494fc174654dbd23050438f677"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>tearDown</b> ()</td></tr>
<tr class="separator:af90bca494fc174654dbd23050438f677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d638220c08c9c3c500ffb6b4ecfcaa9"><td class="memItemLeft" align="right" valign="top"><a id="a7d638220c08c9c3c500ffb6b4ecfcaa9"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>run</b> ()</td></tr>
<tr class="separator:a7d638220c08c9c3c500ffb6b4ecfcaa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af409fb877cde1701963fa0d5bcbb12be"><td class="memItemLeft" align="right" valign="top"><a id="af409fb877cde1701963fa0d5bcbb12be"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>goTo</b> (yarp::sig::Vector position)</td></tr>
<tr class="separator:af409fb877cde1701963fa0d5bcbb12be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4a3ea41f4fb7c0e9d93fbc75a6c71c"><td class="memItemLeft" align="right" valign="top"><a id="a5a4a3ea41f4fb7c0e9d93fbc75a6c71c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>goToSingle</b> (int i, double pos, double *reached_pos)</td></tr>
<tr class="separator:a5a4a3ea41f4fb7c0e9d93fbc75a6c71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8430fc193c56418843c67ddde4966571"><td class="memItemLeft" align="right" valign="top"><a id="a8430fc193c56418843c67ddde4966571"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>goToSingleExceed</b> (int i, double position_to_reach, double limit, double reachedLimit, double *reached_pos)</td></tr>
<tr class="separator:a8430fc193c56418843c67ddde4966571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4d5b348e7689e4c1382252bcbb0ae0a"><td class="memItemLeft" align="right" valign="top"><a id="ae4d5b348e7689e4c1382252bcbb0ae0a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setMode</b> (int desired_mode)</td></tr>
<tr class="separator:ae4d5b348e7689e4c1382252bcbb0ae0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0790f6c7d9d1886aaa1bb4848cf790ef"><td class="memItemLeft" align="right" valign="top"><a id="a0790f6c7d9d1886aaa1bb4848cf790ef"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>saveToFile</b> (std::string filename, yarp::os::Bottle &amp;b)</td></tr>
<tr class="separator:a0790f6c7d9d1886aaa1bb4848cf790ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Check if the software joint limits are properly set. </p>
<p>The limits are set in the robot configuration files. The test asks the limits to robotInterface using the IControlLimits interface. The test moves each joint first to the max lim, then to the min lim, then to home. If the joint is unable to reach the software limits within a certain tolerance, the test fails and the joint is put back in home position. The timeout for each joint to reach the limit position is fixed to 20 seconds. The test uses an limited output to avoid to damage the joint if, for example, an hardware limit is reached before the software limit. If this limit is too small, the the joint may be unable to reach the limit (e.g. because of friction), so the value must be chosen accurately. The test assumes the the position control is properly working and the position pid is properly tuned. After testing the limits, this test also tries to move the joint out of the limits on puropose (adding to the joint limits the value of outOfBoundPosition). The test is successfull if the position move command is correctly stopped at the limit.</p>
<p>Example: testRunner -v -t JointLimits.dll -p "--robot icub --part head --joints ""(0 1 2)"" --home ""(0 0 0)"" --speed ""(20 20 20)"" --outputLimitPercent ""(30 30 30)"" --outOfBoundPosition ""(2 2 2)"" --tolerance 0.2"</p>
<p>Check the following functions: </p><ul>
<li>IControlLimits::getLimits()</li>
</ul>
<p>Support functions: </p><ul>
<li>IPositionControl::getAxes() </li>
<li>IPositionControl::positionMove() </li>
<li>IPositionContol::setRefSpeeds() </li>
<li>IEncoders::getEncoder() </li>
<li>IEncoders::getEncoders() </li>
<li>IPid::getPid()/IPid::setPid() </li>
<li>IControlMode::getControlMode()/setControlMode() </li>
<li>IInteractionMode::getInteractionMode()/setInteractionMode()</li>
</ul>
<p>Accepts the following parameters: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Parameter name   </th><th class="markdownTableHeadCenter">Type   </th><th class="markdownTableHeadCenter">Units   </th><th class="markdownTableHeadCenter">Default Value   </th><th class="markdownTableHeadCenter">Required   </th><th class="markdownTableHeadCenter">Description   </th><th class="markdownTableHeadCenter">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">robot   </td><td class="markdownTableBodyCenter">string   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">The name of the robot.   </td><td class="markdownTableBodyCenter">e.g. icub    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">part   </td><td class="markdownTableBodyCenter">string   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">The name of trhe robot part.   </td><td class="markdownTableBodyCenter">e.g. left_arm    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">joints   </td><td class="markdownTableBodyCenter">vector of ints   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">List of joints to be tested   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">home   </td><td class="markdownTableBodyCenter">vector of doubles of size joints   </td><td class="markdownTableBodyCenter">deg   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">The home position for each joint   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">speed   </td><td class="markdownTableBodyCenter">vector of doubles of size joints   </td><td class="markdownTableBodyCenter">deg/s   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">The reference speed used furing the movement   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">tolerance   </td><td class="markdownTableBodyCenter">vector of doubles of size joints   </td><td class="markdownTableBodyCenter">deg   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">The position tolerance used to check if the limit has been properly reached.   </td><td class="markdownTableBodyCenter">Typical value = 0.2 deg.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">outputLimitPercent   </td><td class="markdownTableBodyCenter">vector of doubles of size joints   </td><td class="markdownTableBodyCenter">%   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">The maximum motor output (expressed as percentage).   </td><td class="markdownTableBodyCenter">Safe values can be, for example, 30%.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">outOfBoundPosition   </td><td class="markdownTableBodyCenter">vector of doubles of size joints   </td><td class="markdownTableBodyCenter">%   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">Yes   </td><td class="markdownTableBodyCenter">This value is added the joint limit to test that a position command is not able to move out of the joint limits   </td><td class="markdownTableBodyCenter">Typical value 2 deg.   </td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="jointLimits_8h_source.html#l00074">74</a> of file <a class="el" href="jointLimits_8h_source.html">jointLimits.h</a>.</p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/icub-tests/icub-tests/gh-pages/src/jointLimits/<a class="el" href="jointLimits_8h_source.html">jointLimits.h</a></li>
<li>/home/runner/work/icub-tests/icub-tests/gh-pages/src/jointLimits/<a class="el" href="jointLimits_8cpp_source.html">jointLimits.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
